{% load static %}

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>{% block title %}Display &ndash; Tiny Mesh{% endblock %}</title>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->

        <link type="text/css" rel="stylesheet" media="all" href="{% static 'css/app.css' %}">
        <link type="text/css" rel="stylesheet" media="all" href="{% static 'css/display.css' %}">

        {% block header %}
        {% endblock %}
    </head>
    <body class="">
        <div class="box" id="model" data-token="{{ model_token }}">
        </div>
        <div class="box" id="stats">
        </div>
        <div class="box third" id="prod_graph">
        </div>
        <div class="box third" id="kwh_graph">
        </div>
        <div class="box third" id="max_kwh_chart">
            Chart
        </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="{% url 'js_reverse' %}" type="text/javascript"></script>

{% block javascript %}
<script type="text/javascript" src="{% static 'js/display_stats.js' %}"></script>

<script type="text/javascript" src="https://api.bimsync.com/1.0/js/viewer.js"></script>
<script type="text/javascript" src="{% static 'js/display_model.js' %}"></script>

<script type="text/javascript" src="{% static 'justGage.1.0.1/raphael.2.1.0.min.js' %}"></script>
<script type="text/javascript" src="{% static 'justGage.1.0.1/justgage.dev.js' %}"></script>
<script type="text/javascript" src="{% static 'js/display_charts.js' %}"></script>

<script type="text/javascript" src="{% static 'js/flot/jquery.flot.js' %}"></script>
<script type="text/javascript" src="{% static 'js/flot/jquery.flot.stack.js' %}"></script>

<script type="text/javascript" src="{% static 'js/events/event_manager.js' %}"></script>
<script type="text/javascript">
$(function() {
    var event_manager = new aiot.events.EventManager({
        on_event: function(event) {
            $('.box').each(function() {
                if($(this).data('updateFunc') !== undefined)
                    $(this).data('updateFunc')(event);
            });
        },
        url: Urls.display_data_update() + '?stream=true'
    });
    event_manager.start();
});
</script>
{% endblock %}

    </body>
</html>
